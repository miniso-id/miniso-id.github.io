/* ===============================
   RESET & BASE
================================ */
*{
  box-sizing:border-box;
  -webkit-tap-highlight-color:transparent;
}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,sans-serif;
  background:#f5f7fa;
  color:#111;
}

h2,h3{
  margin:0 0 10px 0;
}

/* ===============================
   APP WRAPPER
================================ */
#app{
  max-width:960px;
  margin:0 auto;
  padding:16px;
}

/* ===============================
   SEARCH BOX
================================ */
.search-box{
  display:flex;
  gap:8px;
  margin-bottom:14px;
}

.search-box input{
  flex:1;
  padding:10px 12px;
  font-size:15px;
  border:1px solid #ccc;
  border-radius:8px;
  outline:none;
}

.search-box input:focus{
  border-color:#007aff;
}

.search-box button{
  padding:10px 14px;
  font-size:14px;
  border:none;
  border-radius:8px;
  background:#007aff;
  color:#fff;
  cursor:pointer;
}

.search-box button:active{
  transform:scale(0.97);
}

/* ===============================
   SCAN HISTORY
================================ */
#history{
  display:flex;
  gap:10px;
  overflow-x:auto;
  padding-bottom:6px;
  margin-bottom:16px;
  scrollbar-width:none;
}

#history::-webkit-scrollbar{
  display:none;
}

.history-item{
  flex:0 0 auto;
  padding:6px 12px;
  background:#fff;
  border-radius:20px;
  border:1px solid #e0e0e0;
  font-size:13px;
  white-space:nowrap;
  cursor:pointer;
  transition:all .2s;
}

.history-item:hover{
  background:#007aff;
  color:#fff;
}

/* ===============================
   RESULT GRID
================================ */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(160px,1fr));
  gap:12px;
}

.card{
  background:#fff;
  border-radius:12px;
  padding:10px;
  box-shadow:0 2px 6px rgba(0,0,0,.06);
  text-align:center;
}

.card img{
  width:100%;
  height:140px;
  object-fit:contain;
  border-radius:8px;
}

.card h4{
  margin:8px 0 4px;
  font-size:14px;
}

.card p{
  margin:0;
  font-size:12px;
  color:#666;
}

/* ===============================
   LOGIN PAGE
================================ */
#login{
  position:fixed;
  inset:0;
  background:#f5f7fa;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:999;
}

.login-box{
  width:100%;
  max-width:360px;
  background:#fff;
  padding:24px;
  border-radius:14px;
  box-shadow:0 10px 30px rgba(0,0,0,.1);
}

.login-box h2{
  text-align:center;
  margin-bottom:16px;
}

.login-box input{
  width:100%;
  padding:12px;
  margin-bottom:10px;
  font-size:14px;
  border-radius:8px;
  border:1px solid #ccc;
}

.login-box button{
  width:100%;
  padding:12px;
  background:#007aff;
  color:#fff;
  border:none;
  border-radius:8px;
  font-size:15px;
  cursor:pointer;
}

.login-error{
  text-align:center;
  color:#d93025;
  font-size:13px;
  margin-top:8px;
  animation:shake .35s;
}

@keyframes shake{
  0%{transform:translateX(0)}
  25%{transform:translateX(-5px)}
  50%{transform:translateX(5px)}
  75%{transform:translateX(-5px)}
  100%{transform:translateX(0)}
}

/* ===============================
   ROLE BADGE
================================ */
#roleBadge{
  position:fixed;
  top:10px;
  right:10px;
  background:#007aff;
  color:#fff;
  font-size:12px;
  padding:6px 10px;
  border-radius:20px;
  z-index:10;
}

/* ===============================
   DESKTOP POLISH
================================ */
@media (min-width:768px){

  .search-box{
    max-width:520px;
    margin-left:auto;
    margin-right:auto;
  }

  #history{
    max-width:520px;
    margin-left:auto;
    margin-right:auto;
  }

  .grid{
    max-width:900px;
    margin-left:auto;
    margin-right:auto;
  }
}

/* ===============================
   HYBRID TEXT (CLAMP + EXPAND)
================================ */

/* Judul produk */
.card h4{
  font-size:14px;
  line-height:1.35;
  margin:8px 0 6px;

  display:-webkit-box;
  -webkit-line-clamp:2;     /* DEFAULT 2 BARIS */
  -webkit-box-orient:vertical;

  overflow:hidden;
  word-break:break-word;
  cursor:pointer;
  transition:all .2s ease;
}

/* Deskripsi / harga */
.card p{
  font-size:12px;
  line-height:1.4;
  color:#555;

  display:-webkit-box;
  -webkit-line-clamp:3;     /* DEFAULT 3 BARIS */
  -webkit-box-orient:vertical;

  overflow:hidden;
  word-break:break-word;
  cursor:pointer;
}

/* EXPANDED STATE */
.card .expand{
  -webkit-line-clamp:unset !important;
  max-height:none;
}

/* ===============================
   CARD TEXT SAFE WRAP (FINAL)
================================ */

/* Container info */
.card .info{
  overflow:hidden;
}

/* Judul */
.card .info b{
  display:block;
  font-size:14px;
  line-height:1.35;
  margin-bottom:6px;

  display:-webkit-box;
  -webkit-line-clamp:2;
  -webkit-box-orient:vertical;

  overflow:hidden;
  word-break:break-word;
  overflow-wrap:anywhere;
}

/* Barcode / kode */
.card .info small{
  display:block;
  font-size:11px;
  color:#777;
  margin-bottom:6px;

  /* INI KUNCI UTAMA */
  word-break:break-all;
  overflow-wrap:anywhere;
  white-space:normal;
}

/* Harga & deskripsi */
.card .info div{
  font-size:12px;
  line-height:1.4;
  color:#555;

  display:-webkit-box;
  -webkit-line-clamp:4;   /* boleh 3 / 4 */
  -webkit-box-orient:vertical;

  overflow:hidden;

  word-break:break-word;
  overflow-wrap:anywhere;
}

/* Expand on tap (optional) */
.card .info div.expand{
  -webkit-line-clamp:unset;
}

/* ===============================
   MOBILE FULL WIDTH PRODUCT
================================ */
@media (max-width: 768px){

  /* App padding */
  #app{
    padding:16px;
  }

  /* Grid jadi 1 kolom */
  #result.grid{
    display:grid;
    grid-template-columns:1fr;
    gap:16px;
  }

  /* Card full layar */
  .card{
    width:100%;
    max-width:100%;
    margin:0 auto;
    border-radius:16px;
  }

  /* Gambar lebih besar */
  .card img{
    width:100%;
    height:auto;
    max-height:280px;
    object-fit:contain;
  }

  /* Info lebih nyaman dibaca */
  .card .info{
    padding:14px;
    text-align:center;
  }

  /* Judul */

  .card .info b{
    white-space: normal;        /* boleh turun baris */
    overflow: visible;          /* jangan dipotong */
    text-overflow: unset;       /* hapus ... */
    display: block;
    line-height: 1.4;
    word-break: break-word;     /* aman untuk kata panjang */
    font-size: 16px;
  }


  /* Barcode */
  .card .info small{
    font-size:12px;
    display:block;
    margin:6px 0;
    word-break:break-all;
  }

  /* Harga */
  .card .info div{
    font-size:14px;
    line-height:1.5;
  }
}

/* ===============================
   MOBILE: INPUT ATAS â€“ SCAN BAWAH
================================ */
@media (max-width: 768px){

  /* Search box jadi vertikal */
  .search-box{
    display:flex;
    flex-direction:column;
    gap:12px;
    width:100%;
  }

  /* Input full width */
  .input-wrap{
    width:100%;
  }

  .input-wrap input{
    width:100%;
    height:48px;
    font-size:16px;
    border-radius:12px;
  }

  /* Tombol scan full width */
  #scanBtn{
    width:100%;
    height:48px;
    font-size:16px;
    border-radius:12px;
    display:flex;
    align-items:center;
    justify-content:center;
    gap:8px;
  }

  /* Clear (X) tetap di posisi benar */
  #clearBtn{
    top:50%;
    transform:translateY(-50%);
  }
}
